#!/bin/bash

#  --- SoloWizard documentation here ---



pushd `pwd`
if rvm --version 2>/dev/null; then
  gem install soloist
else
  sudo gem install soloist
fi

mkdir -p ~/cookbooks; cd ~/cookbooks
cat > soloistrc <<EOF
cookbook_paths:
- $PWD
recipes:
<% @soloist_script.recipes.by_name.each do |recipe| %>
- pivotal_workstation::<%= recipe.name %>
<% end %>
EOF
if [[ -d pivotal_workstation ]]; then
  cd pivotal_workstation && git pull && cd ..
else
  git clone https://github.com/pivotal/pivotal_workstation.git
fi
soloist
popd